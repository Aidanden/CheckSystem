# ๐ ุฏููู ุชูุณูู ุฎุท MICR

## ๐ ูุง ูู ุฎุท MICRุ

**MICR** = Magnetic Ink Character Recognition (ุงูุชุนุฑู ุนูู ุงูุฃุญุฑู ุจุงูุญุจุฑ ุงููุบูุงุทูุณู)

ูู ุงูุฎุท ุงููุทุจูุน ูู ุฃุณูู ุงูุดูู ูุงูุฐู ูุญุชูู ุนูู ูุนูููุงุช ุงูุดูู ุงููุดูุฑุฉ.

---

## ๐ข ุชูููู ุฎุท MICR

### ุงูุชุฑุชูุจ (ูู ุงููููู ุฅูู ุงููุณุงุฑ):

```
[ููุน ุงูุตู] [ุงูุฑูู ุงูุชูุฌููู] [ุฑูู ุงูุญุณุงุจ] [ุฑูู ุงูุชุณูุณู]
```

---

## ๐ ุชูุตูู ุงูููููุงุช

### 1๏ธโฃ ุฑูู ุงูุชุณูุณู (Serial Number)
- **ุงูุทูู**: 9 ุฃุฑูุงู
- **ุงูุชูุณูู**: ุฃุตูุงุฑ ุจุงุฏุฆุฉ (Leading zeros)
- **ูุซุงู**: `000000001`, `000000002`, `000000025`
- **ุงููุทุงู**: 
  - ุงูุฃูุฑุงุฏ: 000000001 - 000000025 (25 ุดูู)
  - ุงูุดุฑูุงุช: 000000001 - 000000050 (50 ุดูู)

### 2๏ธโฃ ุงูุฑูู ุงูุชูุฌููู (Routing Number)
- **ุงููุตุฏุฑ**: ูู ุฌุฏูู ุงููุฑูุน (branches.routing_number)
- **ุงูุทูู**: ูุนุชูุฏ ุนูู ุฑูู ุงููุฑุน (ุนุงุฏุฉ 10 ุฃุฑูุงู)
- **ูุซุงู**: `1100000001`
- **ุงููุตู**: ูุญุฏุฏ ุงููุฑุน ุงููุตุฏุฑ ููุดูู

### 3๏ธโฃ ุฑูู ุงูุญุณุงุจ (Account Number)
- **ุงูุทูู**: 15 ุฑูู ุจุงูุถุจุท
- **ูุซุงู**: `100012345678901`
- **ุฃููุงุน**:
  - ูุจุฏุฃ ุจู `1` ููุฃูุฑุงุฏ: `100012345678901`
  - ูุจุฏุฃ ุจู `2` ููุดุฑูุงุช: `200034567890123`

### 4๏ธโฃ ููุน ุงูุตู (Account Type)
- **ุงูุทูู**: 2 ุฑูู
- **ุงูููู ุงููุณููุญุฉ**:
  - `01` = ุญุณุงุจ ูุฑุฏู (Individual)
  - `02` = ุญุณุงุจ ุดุฑูุฉ (Corporate)

---

## ๐ก ุฃูุซูุฉ ูุงููุฉ

### ูุซุงู 1: ุดูู ูุฑุฏู
```
01  1100000001  100012345678901  000000001
```
- ุงูููุน: `01` (ูุฑุฏู) - ูุจุฏุฃ ูู ุงููููู
- ุงูุชูุฌููู: `1100000001` (ุงููุฑุน ุงูุฑุฆูุณู)
- ุงูุญุณุงุจ: `100012345678901` (ุฃุญูุฏ ูุญูุฏ ุนูู ุงูุณูุฏ)
- ุงูุชุณูุณู: `000000001` (ุงูุดูู ุงูุฃูู)

### ูุซุงู 2: ุดูู ุดุฑูุฉ
```
02  1100000001  200034567890123  000000025
```
- ุงูููุน: `02` (ุดุฑูุฉ) - ูุจุฏุฃ ูู ุงููููู
- ุงูุชูุฌููู: `1100000001` (ุงููุฑุน ุงูุฑุฆูุณู)
- ุงูุญุณุงุจ: `200034567890123` (ุดุฑูุฉ ุงูุชูููุฉ ุงููุชูุฏูุฉ)
- ุงูุชุณูุณู: `000000025` (ุงูุดูู ุงูู25)

### ูุซุงู 3: ุขุฎุฑ ุดูู ูู ุฏูุชุฑ ุดุฑูุฉ
```
02  1100000001  200034567890123  000000050
```
- ุงูููุน: `02` (ุดุฑูุฉ) - ูุจุฏุฃ ูู ุงููููู
- ุงูุชูุฌููู: `1100000001`
- ุงูุญุณุงุจ: `200034567890123`
- ุงูุชุณูุณู: `000000050` (ุงูุดูู ุงูู50 - ุขุฎุฑ ุดูู)

---

## ๐ฏ ุงูููุงุนุฏ ุงููุงูุฉ

### โ ูุฌุจ ุฃู:
1. ุชููู ุงูุฃุฑูุงู ุจุงูุชุฑุชูุจ ุงูุตุญูุญ (ูู ุงููููู ูููุณุงุฑ): ููุน ุงูุตู โ ุงูุชูุฌููู โ ุงูุญุณุงุจ โ ุงูุชุณูุณู
2. ูููู ุฑูู ุงูุชุณูุณู ุฏุงุฆูุงู 9 ุฃุฑูุงู (ูุน ุฃุตูุงุฑ ุจุงุฏุฆุฉ)
3. ูููู ุฑูู ุงูุญุณุงุจ 15 ุฑูู ุจุงูุถุจุท
4. ูููู ููุน ุงูุตู `01` ุฃู `02` ููุท (ูุจุฏุฃ ูู ุงููููู)
5. ุชูุตู ุงููุณุงูุฉ ุจูู ูู ูููู

### โ ูุง ุชูุนู:
1. ุนูุณ ุงูุชุฑุชูุจ
2. ุญุฐู ุงูุฃุตูุงุฑ ุงูุจุงุฏุฆุฉ ูู ุงูุชุณูุณู
3. ุงุณุชุฎุฏุงู ุฃูู ุฃู ุฃูุซุฑ ูู 15 ุฑูู ููุญุณุงุจ
4. ุงุณุชุฎุฏุงู ููุน ุตู ุบูุฑ `01` ุฃู `02`

---

## ๐จ๏ธ ูู ุงููุธุงู

### ููู ูุชู ุชูููุฏ ุฎุท MICRุ

**ูู Backend** (`server/src/types/check.types.ts`):
```typescript
static generateMICRLine(
  serialNumber: number,
  routingNumber: string,
  accountNumber: string,
  accountType: 1 | 2
): string {
  const serial = this.formatSerialNumber(serialNumber); // 000000001
  const type = this.formatAccountType(accountType);     // 01 or 02
  // Format (Right to Left): Type โ Routing โ Account โ Serial
  return `${type}  ${routingNumber}  ${accountNumber}  ${serial}`;
}
```

### ุฃูู ููุทุจุนุ
- **ุงููููุน**: ุฃุณูู ุงูุดูู
- **ุงูุฎุท**: MICR E-13B (ุฎุท ุฎุงุต ูููุฑุงุกุฉ ุงููุบูุงุทูุณูุฉ)
- **ุงููุญุงุฐุงุฉ**: ูุงุจูุฉ ููุชุฎุตูุต (ูุณุงุฑ/ูุณุท/ูููู)
- **ุงูุฅุนุฏุงุฏุงุช**: `/settings` ูู ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช

---

## ๐ ุถุจุท ููุถุน ุฎุท MICR

ูู ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช (`/settings`):

1. **X**: ุงููุณุงูุฉ ูู ุงููุณุงุฑ (ุฃูููุงู)
2. **Y**: ุงููุณุงูุฉ ูู ุงูุฃุนูู (ุนููุฏูุงู) - ุนุงุฏุฉ ูู ุฃุณูู ุงูุดูู
3. **ุญุฌู ุงูุฎุท**: ุญุฌู ุงูุฎุท ุจุงูููุงุท (pt)
4. **ุงููุญุงุฐุงุฉ**: ูุณุงุฑ / ูุณุท / ูููู

### ุงูููู ุงูุงูุชุฑุงุถูุฉ:

**ููุฃูุฑุงุฏ (235 ร 86 ููู):**
- X: 117.5 ููู (ูุณุท ุงูุดูู)
- Y: 80 ููู (ูุฑุจ ุงูุฃุณูู)
- ุญุฌู ุงูุฎุท: 12 pt
- ุงููุญุงุฐุงุฉ: ูุณุท

**ููุดุฑูุงุช (240 ร 86 ููู):**
- X: 120 ููู (ูุณุท ุงูุดูู)
- Y: 80 ููู (ูุฑุจ ุงูุฃุณูู)
- ุญุฌู ุงูุฎุท: 12 pt
- ุงููุญุงุฐุงุฉ: ูุณุท

---

## ๐ ุงูุชุญูู ูู ุตุญุฉ ุฎุท MICR

### ูู ุงูููุฏ:
```typescript
static validateMICRComponents(components: MICRComponents): boolean {
  return (
    components.serialNumber.length === 9 &&
    components.routingNumber.length === 10 &&
    components.accountNumber.length === 15 &&
    components.accountType.length === 2 &&
    (components.accountType === '01' || components.accountType === '02')
  );
}
```

---

## ๐ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุฌุฏูู print_operations:
```sql
SELECT 
  serial_from,          -- ุจุฏุงูุฉ ุงูุชุณูุณู
  serial_to,            -- ููุงูุฉ ุงูุชุณูุณู
  routing_number,       -- ุงูุฑูู ุงูุชูุฌููู
  account_number,       -- ุฑูู ุงูุญุณุงุจ
  account_type          -- 1 ุฃู 2
FROM print_operations;
```

---

## ๐จ ูู ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช

### ุงููุนุงููุฉ:
ูุนุฑุถ ุฎุท MICR ุงูุชุฌุฑูุจู:
```
01  1100000001  100012345678901  000000001
```

ูุน ุดุฑุญ ููู ูููู:
- โ ุงูููุน: 01 (ุฃูุฑุงุฏ) ุฃู 02 (ุดุฑูุงุช) - ูุจุฏุฃ ูู ุงููููู
- โ ุงูุชูุฌููู: 1100000001 (ุฑูู ุงููุฑุน)
- โ ุงูุญุณุงุจ: 100012345678901 (15 ุฑูู)
- โ ุงูุชุณูุณู: 000000001 (9 ุฃุฑูุงู)

---

## ๐ ุงูุงุณุชุฎุฏุงู ุงูุนููู

### 1. ููุทุจุงุนุฉ ุงูุนุงุฏูุฉ:
```
POST /api/printing/print
{
  "accountNumber": "100012345678901",
  "serialFrom": 1,     // ุณูุตุจุญ: 000000001
  "serialTo": 25       // ุณูุตุจุญ: 000000025
}
```

### 2. ูุฅุนุงุฏุฉ ุงูุทุจุงุนุฉ:
```
POST /api/printing/print
{
  "operationId": 5,
  "serialFrom": 10,    // ุณูุตุจุญ: 000000010
  "serialTo": 15       // ุณูุตุจุญ: 000000015
}
```

---

## โ ูุงุฆูุฉ ุงูุชุญูู

ูุจู ุงูุทุจุงุนุฉุ ุชุฃูุฏ ูู:
- โ ุฑูู ุงูุชุณูุณู 9 ุฃุฑูุงู
- โ ุงูุฑูู ุงูุชูุฌููู ุตุญูุญ (ูู ุฌุฏูู ุงููุฑูุน)
- โ ุฑูู ุงูุญุณุงุจ 15 ุฑูู
- โ ููุน ุงูุตู 01 ุฃู 02 (ูุจุฏุฃ ูู ุงููููู)
- โ ุงูุชุฑุชูุจ ุตุญูุญ: [ููุน] [ุชูุฌููู] [ุญุณุงุจ] [ุชุณูุณู] (ูู ุงููููู ูููุณุงุฑ)
- โ ูุณุงูุงุช ุจูู ุงูููููุงุช

---

## ๐ ูููุงุช ุฐุงุช ุตูุฉ

- `server/src/types/check.types.ts` - ุชุนุฑููุงุช ูุชูุณููุงุช MICR
- `server/src/services/printing.service.ts` - ุชูููุฏ MICR ุฃุซูุงุก ุงูุทุจุงุนุฉ
- `client/src/app/settings/page.tsx` - ุตูุญุฉ ุฅุนุฏุงุฏุงุช ููุถุน MICR
- `server/src/utils/pdfGenerator.ts` - ุทุจุงุนุฉ MICR ุนูู PDF

---

**ููุงุญุธุฉ**: ุฎุท MICR ูุฌุจ ุฃู ููุทุจุน ุจุงูุญุจุฑ ุงููุบูุงุทูุณู ุงูุฎุงุต ููู ุชุชููู ุขูุงุช ุงููุฑุงุกุฉ ูู ูุฑุงุกุชู. ูุฐุง ูุชุทูุจ ุทุงุจุนุฉ MICR ุฎุงุตุฉ ุฃู ูุฑู ุดููุงุช ุฌุงูุฒ ุจุฎุท MICR ูุทุจูุน ูุณุจูุงู.

---

**ุชู ุฅูุดุงุก ูุฐุง ุงูุฏููู ุจูุงุณุทุฉ ูุธุงู ุทุจุงุนุฉ ุงูุดููุงุช ๐**

