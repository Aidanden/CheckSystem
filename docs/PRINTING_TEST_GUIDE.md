# ๐จ๏ธ ุฏููู ุงุฎุชุจุงุฑ ูุธุงู ุงูุทุจุงุนุฉ - MICR Check Printing

## โ ูุง ุชู ุชุญุฏูุซู

### 1. ููุงุตูุงุช ุงูุดููุงุช ุงููุงููุฉ
โ **ุงูููู:** `server/CHECK_SPECIFICATIONS.md`
- ููุงุณุงุช ุงูุดููุงุช (ุฃูุฑุงุฏ/ุดุฑูุงุช)
- ุชูุณูู ุฎุท MICR
- ููุถุน ูู ุนูุตุฑ ุนูู ุงูุดูู
- ุฃูุซูุฉ ุนูููุฉ

### 2. Types ู Interfaces ุฌุฏูุฏุฉ
โ **ุงูููู:** `server/src/types/check.types.ts`
- `CheckData` - ุจูุงูุงุช ุดูู ูุงุญุฏ
- `CheckbookData` - ุจูุงูุงุช ุฏูุชุฑ ูุงูู
- `CheckFormatter` - ุฏูุงู ูุณุงุนุฏุฉ
- `CHECK_CONSTANTS` - ุซูุงุจุช ุงููุธุงู

### 3. ุฎุฏูุฉ ุงูุทุจุงุนุฉ ุงููุญุฏุซุฉ
โ **ุงูููู:** `server/src/services/printing.service.ts`
- ุชูููุฏ ุจูุงูุงุช MICR ููู ุดูู
- ุญุณุงุจ ุงูุชุณูุณู ุจุดูู ุตุญูุญ (9 ุฃุฑูุงู)
- ุนุฑุถ ุชูุงุตูู ุงูุทุจุงุนุฉ ูู Console

---

## ๐ฏ ููุงุตูุงุช ุงูุดูู

### ุฎุท MICR (ุฃุณูู ุงูุดูู ูู ุงููุณุงุฑ)

```
[ุงูุชุณูุณู 9 ุฃุฑูุงู] [ุฑูู ุงูุชูุฌูู 9 ุฃุฑูุงู] [ุฑูู ุงูุญุณุงุจ 15 ุฑูู] [ููุน ุงูุญุณุงุจ 2 ุฑูู]
```

**ูุซุงู ูุดูู ูุฑุฏู:**
```
000000001 123456789 100012345678901 01
```

**ูุซุงู ูุดูู ุดุฑูุฉ:**
```
000000001 987654321 200034567890123 02
```

### ููุถุน ุงูุนูุงุตุฑ:

1. **ูู ุงูุฃุนูู (ุงูููุชุตู):** ุงุณู ุงููุฑุน
2. **ุชุญุชู ููููุงู (ุนูู ุงููููู):** ุงูุชุณูุณู (000000001)
3. **ูู ุงูุฃุณูู (ุงููุณุงุฑ ููู MICR):** ุงุณู ุตุงุญุจ ุงูุญุณุงุจ
4. **ูู ุงูุฃุณูู (ุฎุท MICR):** ุงูุฃุฑูุงู ุจุงูุชุฑุชูุจ

### ุงูููุงุณุงุช:

| ุงูููุน | ุงูุนุฑุถ | ุงูุทูู |
|------|------|-------|
| ุฃูุฑุงุฏ | 86 ููู | 235 ููู |
| ุดุฑูุงุช | 86 ููู | 240 ููู |

---

## ๐ ููููุฉ ุงูุงุฎุชุจุงุฑ

### ุงูุฎุทูุฉ 1: ุชุดุบูู Backend

```powershell
cd G:\Code\CheckSystem\server

# ุฅุฐุง ูู ุชูู ูุฏ ุดุบูุช seed ุจุนุฏ
npm run db:seed

# ุชุดุบูู ุงูุฎุงุฏู
npm run dev
```

### ุงูุฎุทูุฉ 2: ุทุจุงุนุฉ ูู Frontend

```
1. ุงูุชุญ: http://10.250.100.40:5000
2. Login: admin / [REDACTED]
3. ุงุฐูุจ ุฅูู "ุงููุฎุฒูู"
4. ุชุฃูุฏ ูู ูุฌูุฏ ูุฎุฒูู ูุงูู (100 ูุฑูุฉ ูุซูุงู)
5. ุงุฐูุจ ุฅูู "ุทุจุงุนุฉ ุดูู"
6. ุฌุฑุจ ุฃุญุฏ ุงูุญุณุงุจุงุช:
   - 100012345678901 (ูุฑุฏู)
   - 100023456789012 (ูุฑุฏู)
   - 200034567890123 (ุดุฑูุฉ)
7. ุงุถุบุท "ุงุณุชุนูุงู"
8. ุงุถุบุท "ุทุจุงุนุฉ ุฏูุชุฑ ุดููุงุช"
```

### ุงูุฎุทูุฉ 3: ุดุงูุฏ ูุชูุฌุฉ ุงูุทุจุงุนุฉ

ุนูุฏ ุงูุทุจุงุนุฉุ ุณุชุธูุฑ ุชูุงุตูู ูู **console ุงูุฎุงุฏู** (server terminal):

```
============================================================
๐ ุฅุฑุณุงู ุฏูุชุฑ ุงูุดููุงุช ุฅูู ุทุงุจุนุฉ MICR
============================================================

๐ ูุนูููุงุช ุงูุนูููุฉ:
   ุงูุญุณุงุจ: 100012345678901
   ุงูุนููู: ุฃุญูุฏ ูุญูุฏ ุนูู ุงูุณูุฏ
   ุงููุฑุน: ุงููุฑุน ุงูุฑุฆูุณู
   ุงูููุน: ูุฑุฏู
   ุงูุชุณูุณู: ูู 1 ุฅูู 25
   ุนุฏุฏ ุงูุฃูุฑุงู: 25

๐จ๏ธ ููุงุฐุฌ ูู ุงูุดููุงุช:

   โ ุดูู ุฑูู 1:
      ุงูููุงุณ: 86ร235 ููู
      ูู ุงูุฃุนูู (ุงูููุชุตู): ุงููุฑุน ุงูุฑุฆูุณู
      ุชุญุชู (ุนูู ุงููููู): 000000001
      ูู ุงูุฃุณูู (ุงููุณุงุฑ): ุฃุญูุฏ ูุญูุฏ ุนูู ุงูุณูุฏ
      ุฎุท MICR: 000000001 123456789 100012345678901 01

   โ ุดูู ุฑูู 2:
      ุงูููุงุณ: 86ร235 ููู
      ูู ุงูุฃุนูู (ุงูููุชุตู): ุงููุฑุน ุงูุฑุฆูุณู
      ุชุญุชู (ุนูู ุงููููู): 000000002
      ูู ุงูุฃุณูู (ุงููุณุงุฑ): ุฃุญูุฏ ูุญูุฏ ุนูู ุงูุณูุฏ
      ุฎุท MICR: 000000002 123456789 100012345678901 01

   ... ูุจุงูู 23 ุดูู

============================================================
โ ุชู ุฅุฑุณุงู ุงูุจูุงูุงุช ุฅูู ุงูุทุงุจุนุฉ ุจูุฌุงุญ
============================================================
```

---

## ๐งช ุฃูุซูุฉ ุงุฎุชุจุงุฑ ูุฎุชููุฉ

### Test 1: ุดูู ูุฑุฏู ุฌุฏูุฏ

```powershell
# PowerShell
$token = "YOUR_TOKEN"
$headers = @{Authorization = "Bearer $token"}

$body = @{account_number="100012345678901"} | ConvertTo-Json
Invoke-RestMethod -Uri http://10.250.100.40:5000/api/printing/print -Method POST -Headers $headers -ContentType "application/json" -Body $body
```

**ุงููุชููุน:**
- 25 ุดูู
- ุงูุชุณูุณู: 000000001 ุฅูู 000000025
- ููุน ุงูุญุณุงุจ: 01
- ุฎุท MICR ููู ุดูู ุตุญูุญ

### Test 2: ุดูู ุดุฑูุฉ

```powershell
$body = @{account_number="200034567890123"} | ConvertTo-Json
Invoke-RestMethod -Uri http://10.250.100.40:5000/api/printing/print -Method POST -Headers $headers -ContentType "application/json" -Body $body
```

**ุงููุชููุน:**
- 50 ุดูู (ููุดุฑูุงุช)
- ุงูุชุณูุณู: 000000001 ุฅูู 000000050
- ููุน ุงูุญุณุงุจ: 02
- ุงูููุงุณ: 86ร240 ููู

### Test 3: ุทุจุงุนุฉ ุซุงููุฉ ูููุณ ุงูุญุณุงุจ

```powershell
# ุงุทุจุน ููุญุณุงุจ 100012345678901 ูุฑุฉ ุฃุฎุฑู
$body = @{account_number="100012345678901"} | ConvertTo-Json
Invoke-RestMethod -Uri http://10.250.100.40:5000/api/printing/print -Method POST -Headers $headers -ContentType "application/json" -Body $body
```

**ุงููุชููุน:**
- 25 ุดูู
- ุงูุชุณูุณู: 000000026 ุฅูู 000000050 โ
- (ูุณุชูุฑ ูู ุขุฎุฑ ุฑูู!)

---

## ๐ ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช

### โ Checklist ููุชุฃูุฏ:

- [ ] ุงูุชุณูุณู 9 ุฃุฑูุงู ุจุงูุถุจุท (000000001)
- [ ] ุฑูู ุงูุชูุฌูู 9 ุฃุฑูุงู ูู ุฌุฏูู ุงููุฑูุน
- [ ] ุฑูู ุงูุญุณุงุจ 15 ุฑูู ูุงูู
- [ ] ููุน ุงูุญุณุงุจ (01 ุฃู 02)
- [ ] ุฎุท MICR ูุงูู ูุตุญูุญ
- [ ] ุงุณู ุงููุฑุน ููุฌูุฏ
- [ ] ุงุณู ุตุงุญุจ ุงูุญุณุงุจ ููุฌูุฏ
- [ ] ุงูููุงุณ ุตุญูุญ (ุฃูุฑุงุฏ 235ุ ุดุฑูุงุช 240)
- [ ] ุนุฏุฏ ุงูุดููุงุช ุตุญูุญ (ุฃูุฑุงุฏ 25ุ ุดุฑูุงุช 50)
- [ ] ุงูุชุณูุณู ูุณุชูุฑ ุนูุฏ ุงูุทุจุงุนุฉ ุงูุซุงููุฉ

---

## ๐ ูุญุต ุงูุจูุงูุงุช ูู Database

### ุจุงุณุชุฎุฏุงู Prisma Studio:

```powershell
cd server
npm run prisma:studio
```

ุงูุชุญ: http://10.250.100.40:5000:5555

**ุชุญูู ูู:**

1. **ุฌุฏูู print_operations:**
   - `serialFrom` ู `serialTo` ุตุญูุญูู
   - `routingNumber` ูู ุงููุฑุน
   - `accountNumber` ุตุญูุญ (15 ุฑูู)
   - `accountType` (1 ุฃู 2)

2. **ุฌุฏูู accounts:**
   - `lastPrintedSerial` ูุชุญุฏุซ ุจุนุฏ ูู ุทุจุงุนุฉ
   - ูุซูุงู: ุจุนุฏ ุทุจุงุนุฉ ุฃููู ูุตุจุญ 25
   - ุจุนุฏ ุทุจุงุนุฉ ุซุงููุฉ ูุตุจุญ 50

3. **ุฌุฏูู inventory:**
   - ุงููููุฉ ุชููุต ุจุนุฏ ูู ุทุจุงุนุฉ
   - ูููุต ูู ุงูููุน ุงูููุงุณุจ (stockType)

---

## ๐ ูุซุงู JSON ููุดูู

```json
{
  "checkNumber": 1,
  "serialNumber": "000000001",
  "routingNumber": "123456789",
  "accountNumber": "100012345678901",
  "accountType": "01",
  "accountHolderName": "ุฃุญูุฏ ูุญูุฏ ุนูู ุงูุณูุฏ",
  "branchName": "ุงููุฑุน ุงูุฑุฆูุณู",
  "checkSize": {
    "width": 86,
    "height": 235,
    "unit": "mm"
  },
  "micrLine": "000000001 123456789 100012345678901 01"
}
```

---

## ๐ฏ ููุงุญุธุงุช ูููุฉ

### 1. ุงูุชุณูุณู

```
โ ุงูุตุญูุญ: 000000001, 000000002, ... 000000025
โ ุฎุทุฃ:     1, 2, 3, ... 25
```

ุงูุชุณูุณู ูุฌุจ ุฃู ูููู **9 ุฃุฑูุงู ุฏุงุฆูุงู** ูุน ุฃุตูุงุฑ ูู ุงูุจุฏุงูุฉ!

### 2. ููุน ุงูุญุณุงุจ

```
โ ุงูุตุญูุญ: 01 ููุฃูุฑุงุฏ, 02 ููุดุฑูุงุช
โ ุฎุทุฃ:     1, 2
```

ูุฌุจ ุฃู ูููู **ุฑูููู** ูุน ุตูุฑ ูู ุงูุจุฏุงูุฉ ุฅุฐุง ูุฒู ุงูุฃูุฑ!

### 3. ุฎุท MICR

```
โ ุงูุตุญูุญ: 000000001 123456789 100012345678901 01
โ ุฎุทุฃ:     1 123456789 100012345678901 1
```

ุฌููุน ุงูุฃุฑูุงู ูุฌุจ ุฃู ุชููู ุจุงูุทูู ุงูุตุญูุญ!

---

## ๐ง ุงูุชูุงูู ูุน ุทุงุจุนุฉ MICR ุญููููุฉ

### ุงูุฎุทูุงุช ุงููุณุชูุจููุฉ:

1. **ุชุซุจูุช driver ุงูุทุงุจุนุฉ**
2. **ุงุณุชุจุฏุงู `sendToMICRPrinter` ุจู API ุงูุทุงุจุนุฉ:**

```typescript
private static async sendToMICRPrinter(checkbookData: CheckbookData): Promise<void> {
  // ุงุณุชุจุฏู ูุฐุง ุจู API ุงูุทุงุจุนุฉ ุงููุนููุฉ
  await micrPrinterAPI.print({
    checks: checkbookData.checks.map(check => ({
      serialNumber: check.serialNumber,
      routingNumber: check.routingNumber,
      accountNumber: check.accountNumber,
      accountType: check.accountType,
      branchName: check.branchName,
      accountHolderName: check.accountHolderName,
      micrLine: check.micrLine,
    })),
    size: checkbookData.checks[0].checkSize,
  });
}
```

3. **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูู ุงูุทุงุจุนุฉ**
4. **ุชุญุฏูุซ status ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช**

---

## โ ุฌุงูุฒ ููุงุณุชุฎุฏุงู!

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                                               โ
โ  โ ูุธุงู ุงูุทุจุงุนุฉ ุฌุงูุฒ!                       โ
โ                                               โ
โ  โ ููุงุตูุงุช MICR ุตุญูุญุฉ                       โ
โ  โ ุงูุชุณูุณู 9 ุฃุฑูุงู                          โ
โ  โ ุฎุท MICR ูุงูู                             โ
โ  โ ุงูููุงุณุงุช ุตุญูุญุฉ                           โ
โ  โ ุฌุงูุฒ ููุชูุงูู ูุน ุทุงุจุนุฉ ุญููููุฉ             โ
โ                                               โ
โ  ุงูุขู: ุฌุฑุจ ุงูุทุจุงุนุฉ! ๐จ๏ธ                      โ
โ                                               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**ุฑุงุฌุน:** `server/CHECK_SPECIFICATIONS.md` ููุชูุงุตูู ุงููุงููุฉ!



